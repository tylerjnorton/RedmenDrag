{"version":3,"file":"6.a59abdaa8d4a80bc05a5.hot-update.js","sources":["webpack:///components/AddPlayer.js"],"sourcesContent":["import React from \"react\";\n\nexport default class AddPlayer extends React.Component {\n  fileInput = React.createRef();\n  state = { playerName: \"\" };\n  handleSubmit = async event => {\n    event.preventDefault();\n    const playersCollection = firebase.firestore().collection(\"players\");\n    const playerRef = await playersCollection.doc();\n\n    const fileRef = firebase\n      .storage()\n      .ref()\n      .child(playerRef.id);\n\n    const uploadProgress = fileRef.put(this.fileInput.current.files[0]);\n\n    uploadProgress.on(\n      \"state_changed\",\n      snapshot => {\n        const progress =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n\n        this.setState(state => ({\n          ...state,\n          uploading: true,\n          progress\n        }));\n      },\n      error => console.error(error),\n      () => {\n        playerRef.set({ playerName: this.state.playerName });\n        this.setState(state => ({\n          ...state,\n          uploading: false,\n          progress: null,\n          playerName: \"\"\n        }));\n\n        this.fileInput.current.value = \"\";\n      }\n    );\n  };\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <h2>Add a player by uploading his name and image here.</h2>\n        <p>\n          The name will be used when you want to bring that player onto the\n          screen\n        </p>\n\n        <input\n          type=\"text\"\n          id=\"playerNameInput\"\n          name=\"name\"\n          required\n          placeholder=\"Player Name\"\n          value={this.state.playerName}\n          onChange={({ target }) =>\n            this.setState(state => ({\n              ...state,\n              playerName: target.value\n            }))\n          }\n        />\n        <input\n          id=\"uploadInput\"\n          type=\"file\"\n          name=\"photo\"\n          required\n          ref={this.fileInput}\n          accept=\"image/png, image/jpeg, image/jpg\"\n        />\n        <br />\n        <br />\n        <button id=\"addPlayerBtn\" disabled={this.state.uploading}>\n          {this.state.uploading ? \"Saving...\" : \"Add Player\"}\n        </button>\n      </form>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// components/AddPlayer.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AACA;;;;;AACA;AAAA;AAAA;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAGA;AAEA;AAKA;AAEA;AAGA;AACA;AAEA;AAAA;AAEA;AACA;AAHA;AAAA;AAKA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAJA;AAAA;AACA;AAMA;AACA;AACA;AApCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;AAqCA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAFA;AAAA;AADA;AAPA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AA/EA;AACA;;;;;A","sourceRoot":""}