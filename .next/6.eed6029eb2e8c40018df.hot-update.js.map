{"version":3,"file":"6.eed6029eb2e8c40018df.hot-update.js","sources":["webpack:///components/Players.js"],"sourcesContent":["import React from \"react\";\n\nexport default class Players extends React.Component {\n  state = {\n    players: {}\n  };\n  actions = {\n    removePlayer: player => event =>\n      firebase\n        .firestore()\n        .collection(\"players\")\n        .doc(player.id)\n        .delete(),\n    togglePlayerSelected: player => event =>\n      firebase\n        .firestore()\n        .collection(\"players\")\n        .doc(player.id)\n        .update({ isSelected: !player.isSelected })\n  };\n  handlePlayerRemoved = async doc => {\n    this.setState(state => {\n      delete state.players[doc.id];\n      return {\n        ...state,\n        players: state.players\n      };\n    });\n  };\n  handlePlayerModified = async doc => {\n    this.setState(state => ({\n      ...state,\n      players: {\n        ...state.players,\n        [doc.id]: {\n          ...state.players[doc.id],\n          ...doc.data(),\n          id: doc.id\n        }\n      }\n    }));\n    const url = await firebase\n      .storage()\n      .ref()\n      .child(doc.id)\n      .getDownloadURL();\n    this.setState(state => ({\n      ...state,\n      players: {\n        ...state.players,\n        [doc.id]: {\n          ...state.players[doc.id],\n          ...doc.data(),\n          url\n        }\n      }\n    }));\n  };\n  onSnapshot = snap => {\n    snap.docChanges().forEach(async ({ doc, type }) => {\n      switch (type) {\n        case \"added\":\n        case \"modified\":\n          return this.handlePlayerModified(doc);\n        case \"removed\":\n          return this.handlePlayerRemoved(doc);\n        default:\n          console.warn(\"Not implemented\", type);\n      }\n    });\n  };\n  componentDidMount() {\n    firebase\n      .firestore()\n      .collection(\"players\")\n      .onSnapshot(this.onSnapshot);\n  }\n  render() {\n    const players = Object.keys(this.state.players)\n      .map(id => this.state.players[id])\n      .sort((a, b) =>\n        (a.playerName || \"\")\n          .toLowerCase()\n          .localeCompare((b.playerName || \"\").toLowerCase())\n      );\n    return this.props.children(players, this.actions);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// components/Players.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AACA;AACA;AADA;;;;;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAKA;AAAA;AALA;AAAA;AAPA;;;;;;;;AAcA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAFA;AAIA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAKA;AALA;AAFA;AAAA;AACA;AAFA;AAAA;AACA;AADA;AAYA;AACA;AAIA;AAAA;AAEA;AAKA;AALA;AAFA;AAAA;AACA;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;AA4BA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAQA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAWA;;;;;;AACA;AACA;AAIA;;;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAKA;AACA;;;;AApFA;AACA;;;;;A","sourceRoot":""}